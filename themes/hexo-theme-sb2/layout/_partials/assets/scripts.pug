if (page && !page.offline)
  script(src="/js/index.min.js", async)

if (page && page.form)
  script(src="https://kwes.io/js/kwes.js", async)

script(type="module").
  // register service worker
  import { Workbox } from 'https://storage.googleapis.com/workbox-cdn/releases/4.0.0/workbox-window.prod.mjs'
  if ('serviceWorker' in navigator) {
    const wb = new Workbox('/sw.js');
    wb.addEventListener('installed', event => {
      if (event.isUpdate) {
        const $swButton = document.createElement('div')
        $swButton.className = 'banner banner--beta banner--omega';
        $swButton.innerHTML = '<p><span>The content has been updated. To see the latest changes, refresh the page, please.</span></p><button class="btn" type="button" onclick="window.location.reload()"><span>Refresh</span></button>';
        document.body.appendChild($swButton)
      }
    });
    wb.register();
  }
