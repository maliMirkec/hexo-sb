if (page.sections)
  each section in page.sections
    section(class=`lg-${section.theme} inside-2`)
      .wrapper.wrapper-bp2.df-col.df-center.t-center.outside-b-2
        h2.fz-step-5.fw-black.outside-b-0=section.title
        h3.fz-step-1.fw-bold.outside-y-3=section.desc
      .wrapper.wrapper-bp3.grid.grid--beta.inside-b-4
        - let list = site.posts.data.filter(post => post.categories.data.find(category => category.name === section.category))

        if (section.type === 'latest')
          - list = list.sort((a, b) => b.date - a.date).slice(0, section.items)
        else if (section.type === 'featured')
          - list = list.filter(a => a.canonical).sort((a, b) => b.date - a.date).slice(0, section.items)

        each thisPost in list
          div(class=`card dif-col-center lg-${section.card}-50 lg-fat inside-3`)
            h4.fz-step-2.fw-black.outside-y-2.t-center
              a(href=urlFor(thisPost.permalink))=thisPost.title
            time.fz-step--1.fw-bold.ttuc.ffm.outside-t-0.outside-b-3.inside-x-1= thisPost.date.format(config.date_format)
            if (thisPost.tags && thisPost.tags.length && thisPost.tags.each)
              .df-center.inside-y-1.outside-t-a
                - thisPost.tags.each(function(tag) {
                  a(class=`button button--${section.theme} button--sm outside-1` href=urlFor(tag.path))=tag.name
                - });
            a.fw-bold.outside-y-2(href=urlFor(thisPost.permalink))=section.cta
