- var cardsClass1 = `${cards.wrapperClass ? cards.wrapperClass : 'padding-x-4 padding-b-4'}`;
- var cardsClass2 = `card df-col-center text-center padding-3 ${cards.elementClass ? cards.elementClass : 'bg-alpha4'}`;
- var cardsClass3 = `card df-col-center text-center padding-3 ${cards.elementClass2 ? cards.elementClass2 : 'lg-alpha'}`;
- var cardList = cards.sorter ? collections[cards.filter].sort((a, b) => (a.data[cards.sorter] > b.data[cards.sorter]) ? -1 : 1) : collections[cards.filter];

if (cardList)
  section(class=cardsClass1)
    .wrapper.wrapper-bp2.grid.grid--alpha
      each post, i in cardList
        if (i >= (cards.limit ? cards.limit : site.limit))
          - break
        - ctaText1 = cards.cta && cards.cta.title ? cards.cta.title : 'Read more &#x21E2;';
        - ctaText2 = cards.cta2 && cards.cta2.title ? cards.cta2.title : 'See all &#x21E2;';
        div(class=cardsClass2)
          h1.fz-step-2.fw-bold.fs-italic.margin-y-2
            a.tdn(href=post.url)= post.data.title
          time.fz-step--1.ffm.margin-t-0= formatDate(post.data.date)
          if (post.data.description)
            .fz-step--1.margin-t-2 !{post.data.description}
          if (post.data.categories)
            .df-center.margin-t-3.margin-b-1
              span.fz-step--1.margin-1 Tagged as:
              span.fz-step--1.margin-1 !{post.data.categories.join(', ')}
          if (post.data.publication && post.data.canonical)
            .margin-y-1
              span.fz-step--1.margin-1 Publication:
              a.fz-step--1.margin-1(href=post.data.canonical)= post.data.publication
          a.fw-bold.margin-y-2(href=post.url) !{ctaText1}
      if (cards.desc)
        div(class=cardsClass3)
          p.fz-step-0 !{cards.desc}
          a.fw-bold.margin-y-2(href=cards.cta2.href) !{ctaText2}
