
  

  


<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

  <link rel="canonical" href="https://www.silvestar.codes/articles/how-i-built-my-second-progressive-web-app-pwa/">

<meta name="referrer" content="no-referrer">

  <meta name="author" content="Silvestar Bistrović">


  <meta name="description" content="As of today, my side project Code Line Daily is available as a Progressive Web App. This post is a sequel to my previous PWA post.">

<title>How I built my second Progressive Web App (PWA)</title>

  <meta property="og:type" content="website">

  <meta property="og:title" content="How I built my second Progressive Web App (PWA)">



  <meta property="og:url" content="https://www.silvestar.codes/articles/how-i-built-my-second-progressive-web-app-pwa/">


  <meta property="og:site_name" content="Home of fearless web developer Silvestar Bistrović">


  <meta property="og:image" content="https://res.cloudinary.com/starbist/image/upload/w_auto,f_auto,q_auto:eco,dpr_auto,c_scale/How_I_built_my_second_Progressive_Web_App_PWA_ffgk5w">


  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@malimirkeccita">
  <meta name="twitter:creator" content="@malimirkeccita">
  
    <meta property="twitter:url" content="https://www.silvestar.codes/articles/how-i-built-my-second-progressive-web-app-pwa/">
  
  
    <meta name="twitter:title" content="How I built my second Progressive Web App (PWA)">
  
  
  
    <meta property="twitter:image" content="https://res.cloudinary.com/starbist/image/upload/w_auto,f_auto,q_auto:eco,dpr_auto,c_scale/How_I_built_my_second_Progressive_Web_App_PWA_ffgk5w">
  


  <meta name="fb:app_id" content="340933169673372">


  <meta name="fb:admins" content="malimirkeccita">


  <meta property="article:author" content="Silvestar Bistrović">
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BlogPosting",
      "mainEntityOfPage": {
        "@type": "WebSite",
        "@id": "/articles/how-i-built-my-second-progressive-web-app-pwa/"
      },
      "headline": "How I built my second Progressive Web App (PWA)",
      "image": [
        "https://res.cloudinary.com/starbist/image/upload/w_auto,f_auto,q_auto:eco,dpr_auto,c_scale/How_I_built_my_second_Progressive_Web_App_PWA_ffgk5w"
      ],
      "datePublished": "2019-12-17",
      "dateModified": "2019-12-17",
      "author": {
        "@type": "Person",
        "name": "Silvestar Bistrović"
      },
      "publisher": {
        "@type": "Organization",
        "name": "Cita",
        "logo": {
          "@type": "ImageObject",
          "url": "https://www.cita.hr/favicon/android-chrome-192x192.png"
        }
      },
      "description": ""
    }
  </script>

<meta property="og:locale" content="en">
<link rel="pingback" href="https://webmention.io/www.silvestar.codes/xmlrpc">
<link rel="webmention" href="https://webmention.io/www.silvestar.codes/webmention">

  
<link href="https://res.cloudinary.com/" rel="dns-prefetch">
<link href="https://d33wubrfki0l68.cloudfront.net/" rel="dns-prefetch">
<link href="https://www.googletagmanager.com" rel="dns-prefetch">
<link href="https://res.cloudinary.com/" rel="preconnect" crossorigin>
<link href="https://d33wubrfki0l68.cloudfront.net/" rel="preconnect" crossorigin>
<link href="https://www.googletagmanager.com" rel="preconnect" crossorigin>
<script src="//instant.page/5.1.0" type="module" integrity="sha384-by67kQnR+pyfy8yWP4kPO12fHKRLHZPfEsiSXR8u2IKcTdxD805MGUXBzVPnkLHw"></script>



  <link href="https://res.cloudinary.com/starbist/image/upload/w_auto,f_auto,q_auto:eco,dpr_auto,c_scale/How_I_built_my_second_Progressive_Web_App_PWA_ffgk5w" rel="preload" crossorigin as="image">


<link href="/css/style.min.css" rel="preload" crossorigin as="style">
<link href="/fonts/Barlow/Barlow-Medium.woff2" rel="preload" crossorigin as="font">
<link href="/fonts/Barlow/Barlow-MediumItalic.woff2" rel="preload" crossorigin as="font">
<link href="/fonts/Barlow/Barlow-SemiBold.woff2" rel="preload" crossorigin as="font">
<link href="/fonts/Barlow/Barlow-SemiBoldItalic.woff2" rel="preload" crossorigin as="font">
<link href="/fonts/PlayfairDisplay/PlayfairDisplay-Medium.woff2" rel="preload" crossorigin as="font">
<link href="/fonts/PlayfairDisplay/PlayfairDisplay-MediumItalic.woff2" rel="preload" crossorigin as="font">
<link href="/fonts/PlayfairDisplay/PlayfairDisplay-SemiBold.woff2" rel="preload" crossorigin as="font">
<link href="/fonts/PlayfairDisplay/PlayfairDisplay-SemiBoldItalic.woff2" rel="preload" crossorigin as="font">

  <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png?v=2021">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png?v=2021">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png?v=2021">
<link rel="manifest" href="/favicon/site.webmanifest?v=2021">
<link rel="mask-icon" href="/favicon/safari-pinned-tab.svg?v=2021" color="#12e09f">
<link rel="shortcut icon" href="/favicon/favicon.ico?v=2021">
<meta name="msapplication-TileColor" content="#111111">
<meta name="msapplication-config" content="/favicon/browserconfig.xml?v=2021">
<meta name="theme-color" content="#12e09f">

  
  
    <style>@charset "UTF-8";html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}code{font-family:monospace,monospace;font-size:1em}img{border-style:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}:root{--bp:80ch;--bp1:600px;--bp2:1200px;--bp3:1600px;--selection:rgba(18, 224, 159, 0.325);--color-alpha:#12e09f;--color-beta:#ff3366;--color-light:#fff;--color-dark:#111;--font-alpha:Playfair Display,serif;--font-beta:Barlow,sans-serif;--font-gamma:Courier New,Courier,monospace;--step-6:54px;--step-5:46.8px;--step-4:39.6px;--step-3:32.4px;--step-2:25.2px;--step-1:21.6px;--step-0:18px;--step--1:16.2px;--step--2:14.4px;--line-height:1.66;--letter-spacing:0.01em;--space-default:0.25rem;--space:1rem;--border-radius:0.1rem;--duration:0.3s;--duration2:0.15s;--delay:0.15s;--cols:repeat(auto-fill, minmax(400px, 1fr));--gap:2rem}@media (max-width:37.49em){:root{--step-6:39.996px;--step-5:31.986px;--step-4:27.99px;--step-3:23.994px;--step-2:21.996px;--step-1:19.998px;--step-0:18px;--step--1:15.984px;--step--2:13.986px;--space-default:0.1rem;--cols:repeat(auto-fill, 1fr)}}[class*=text-]{color:var(--text-color)}.text-alpha{--text-color:#12e09f}[class*=bg-]{background-color:var(--bg-color)}.bg-light{--bg-color:#fff}img{display:block;max-width:100%;height:auto;margin:0}.pic{display:block;position:relative;margin-left:auto;margin-right:auto;max-width:100%}.pic svg{display:block;max-width:100%;height:auto}.pic img{display:block;position:absolute;top:0;right:0;bottom:0;left:0;margin-top:0;margin-bottom:0;filter:drop-shadow(0 0 .5rem rgba(18, 224, 159, .1))}.wrapper{margin-left:auto;margin-right:auto}.wrapper:not([class*=wrapper-]){max-width:calc(var(--bp) + 2rem)}.button:not(.df):not(.db){border-radius:var(--border-radius)}.db{display:block}hr[class*=hr]{border:0;max-height:0;position:relative;padding-top:1rem;padding-bottom:1rem}hr[class*=hr]:before{content:"★";font-size:.5rem;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-shadow:-1rem 0 0 currentColor,1rem 0 0 currentColor}@font-face{font-family:Barlow;src:local("Barlow Medium Italic"),local("Barlow-MediumItalic"),url(/fonts/Barlow/Barlow-MediumItalic.woff2) format("woff2"),url(/fonts/Barlow/Barlow-MediumItalic.woff) format("woff");font-weight:500;font-style:italic;font-display:swap}@font-face{font-family:Barlow;src:local("Barlow SemiBold"),local("Barlow-SemiBold"),url(/fonts/Barlow/Barlow-SemiBold.woff2) format("woff2"),url(/fonts/Barlow/Barlow-SemiBold.woff) format("woff");font-weight:600;font-style:normal;font-display:swap}@font-face{font-family:Barlow;src:local("Barlow Medium"),local("Barlow-Medium"),url(/fonts/Barlow/Barlow-Medium.woff2) format("woff2"),url(/fonts/Barlow/Barlow-Medium.woff) format("woff");font-weight:500;font-style:normal;font-display:swap}@font-face{font-family:Barlow;src:local("Barlow SemiBold Italic"),local("Barlow-SemiBoldItalic"),url(/fonts/Barlow/Barlow-SemiBoldItalic.woff2) format("woff2"),url(/fonts/Barlow/Barlow-SemiBoldItalic.woff) format("woff");font-weight:600;font-style:italic;font-display:swap}@font-face{font-family:'Playfair Display';src:local("Playfair Display Medium Italic"),local("PlayfairDisplay-MediumItalic"),url(/fonts/PlayfairDisplay/PlayfairDisplay-MediumItalic.woff2) format("woff2"),url(/fonts/PlayfairDisplay/PlayfairDisplay-MediumItalic.woff) format("woff");font-weight:500;font-style:italic;font-display:swap}@font-face{font-family:'Playfair Display';src:local("Playfair Display SemiBold"),local("PlayfairDisplay-SemiBold"),url(/fonts/PlayfairDisplay/PlayfairDisplay-SemiBold.woff2) format("woff2"),url(/fonts/PlayfairDisplay/PlayfairDisplay-SemiBold.woff) format("woff");font-weight:600;font-style:normal;font-display:swap}@font-face{font-family:'Playfair Display';src:local("Playfair Display Medium"),local("PlayfairDisplay-Medium"),url(/fonts/PlayfairDisplay/PlayfairDisplay-Medium.woff2) format("woff2"),url(/fonts/PlayfairDisplay/PlayfairDisplay-Medium.woff) format("woff");font-weight:500;font-style:normal;font-display:swap}@font-face{font-family:'Playfair Display';src:local("Playfair Display SemiBold Italic"),local("PlayfairDisplay-SemiBoldItalic"),url(/fonts/PlayfairDisplay/PlayfairDisplay-SemiBoldItalic.woff2) format("woff2"),url(/fonts/PlayfairDisplay/PlayfairDisplay-SemiBoldItalic.woff) format("woff");font-weight:600;font-style:italic;font-display:swap}body{color:var(--black);font-family:var(--font-beta);font-style:normal;font-weight:500;font-size:var(--step-0);line-height:var(--line-height);letter-spacing:var(--letter-spacing)}body:not([id*=kss]){filter:drop-shadow(0 0 .25rem rgba(17, 17, 17, .1))}h1,h2{font-family:var(--font-alpha);font-style:normal;font-weight:600}h1{font-size:var(--step-6)}h2{font-size:var(--step-5)}[class*=fz-step-]{font-size:var(--font-size)}[class*=fz-step-5]{--font-size:var(--step-5)}code,pre{font-family:var(--font-gamma)}.fs-italic{font-style:italic}.button{font-weight:600}.text-center{text-align:center}.button{text-transform:uppercase}.button{letter-spacing:.06em}.padding{padding:1rem}.margin-top{margin-top:1rem}.margin-bottom{margin-bottom:1rem}.margin-top-alpha{margin-top:2rem}@media (min-width:37.5em){.margin-top-alpha{margin-top:5rem}}.margin-bottom-alpha{margin-bottom:2rem}@media (min-width:37.5em){.margin-bottom-alpha{margin-bottom:5rem}}.margin-left{margin-left:1rem}.margin-right{margin-right:1rem}.no-spacing{margin:0;padding:0}.no-margin-top{margin-top:0}a{display:inline-flex;border-radius:var(--border-radius);color:currentColor;text-decoration:none;position:relative;overflow:hidden;outline:0}a:not(.inert):before{content:"";position:absolute;left:0;right:0;top:0;bottom:0;opacity:0;background-color:rgba(18,224,159,.25);z-index:-1}.copy--body a:not([class]){text-decoration:underline;text-decoration-thickness:2px;display:inline}ul{padding-left:1.25em;margin-left:0;margin-right:0;list-style-position:outside}ul ul{font-size:92.5%}.list-style-none{padding-left:0;list-style:none}.list-style-none ul{list-style:none}.button{background-color:var(--color-alpha);color:var(--color-dark);box-sizing:border-box;justify-content:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;font-size:var(--fz-step-0);line-height:1.66;min-height:3em;padding:.25em 2em;border:none;border-radius:0;outline:0}.button:not(.df):not(.db){display:inline-flex;margin:.125em}.button[href]{text-decoration:none}.button--small{font-size:var(--step--1);padding:.125em 1em;min-height:1.75em}.button--inverse{background-color:var(--color-dark);color:var(--color-light)}.button--outline{background-color:transparent;box-shadow:0 0 0 2px currentColor inset}header nav{position:relative}header nav .skip-link{position:absolute;top:.25rem;right:.25rem;bottom:.25rem;left:.25rem;display:flex;align-items:center;justify-content:center;z-index:1}header nav .skip-link:not(:focus){display:block;height:1px;width:1px;overflow:hidden;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px);-webkit-clip-path:inset(1px);clip-path:inset(1px);white-space:nowrap;position:absolute;z-index:-1}header nav>ul{display:flex;justify-content:center;align-items:center}header nav>ul ul{padding-left:.5rem;padding-right:.5rem}@media (max-width:37.49em){header nav{text-align:center}header nav a{white-space:nowrap}header nav>ul{flex-wrap:wrap}header nav>ul>li:first-child{flex:1 1 100%}header nav>ul>li:first-child img{margin:auto}header nav>ul>li:not(:first-child){flex:1 0 150px}}.copy>:first-child{margin-top:0}.copy>:last-child{margin-bottom:0}.copy code{font-size:115%;padding-left:.125em;padding-right:.125em;font-weight:500}</style>
  


  
</head>

  <body>
    
  <header>
    <nav>
      <a class="skip-link bg-light inert" href="#main">Skip to content</a>
      <ul class="list-style-none no-spacing">
        
          <li class="margin-top">
            <a class="db margin-left margin-right" href="/">
              <img src="/gfx/svg/logo-2021.svg" alt="Silvestar Bistrović" width="90" height="90">
            </a>
          </li>
        
        
          
            <li>
              <ul class="margin-top">
                <li>
                  <a href="/portfolio/">Portfolio</a>
                </li>
                
                  
                    <li>
                      <a href="/side-projects/">Side Projects</a>
                    </li>
                  
                    <li>
                      <a href="/testimonials/">Testimonials</a>
                    </li>
                  
                
              </ul>
            </li>
          
            <li>
              <ul class="margin-top">
                <li>
                  <a href="/articles/">Blog</a>
                </li>
                
                  
                    <li>
                      <a href="/publications/">Publications</a>
                    </li>
                  
                    <li>
                      <a href="https://mentor.silvestar.codes/reads#newsletter">UI Dev Newsletter</a>
                    </li>
                  
                
              </ul>
            </li>
          
            <li>
              <ul class="margin-top">
                <li>
                  <a href="/links/">Links</a>
                </li>
                
                  
                    <li>
                      <a href="/mentoring/">Mentoring</a>
                    </li>
                  
                    <li>
                      <a href="/uses/">Uses</a>
                    </li>
                  
                
              </ul>
            </li>
          
            <li>
              <ul class="margin-top">
                <li>
                  <a href="/about/">About</a>
                </li>
                
                  
                    <li>
                      <a href="/contact/">Contact</a>
                    </li>
                  
                    <li>
                      <a href="/services/">Services</a>
                    </li>
                  
                
              </ul>
            </li>
          
        
      </ul>
    </nav>
  </header>


    <main id="main">
      
        
        
          

  <section class="hero margin-top-alpha">
  <div class="wrapper text-center">
    <div class="padding">
      <div class="margin-bottom">
        <a class="button button--small" href="/articles/">/Blog</a>
        
          
            <span class="button button--small button--inverse">pwa</span>
          
        
        
          <span class="button button--small button--outline">2019-12-17</span>
        
      </div>
      
        <h1 class="fz-step-5 no-margin-top margin-bottom">How I built my second Progressive Web App (PWA)</h1>
      
      
      
    </div>
  </div>
</section>

  <hr class="text-alpha hr">

<div class="wrapper margin-top-alpha margin-bottom-alpha">
  <div class="padding">
    
      <div class="copy copy--body margin-bottom">
        <p class="fs-italic">This article was originally published at <a href="">.</a></p>
      </div>
    
    <div class="copy copy--body"><p>As of today, my side project <a href="https://cld.silvestar.codes/">Code Line Daily</a> is available as a Progressive Web App.</p>
<p>If you happen to read <a href="/articles/how-i-built-my-first-progressive-web-app-pwa/">my previous post about “How I built my first Progressive Web App (PWA)”</a>, this article is a sequel.</p>
<h2>Workbox</h2>
<p>In my previous attempt to make PWA, I handled everything manually. I learned about available options and techniques, and that helped me understand how PWA websites work.</p>
<p>This time, I decided to use <a href="https://developers.google.com/web/tools/workbox">Workbox</a> to make PWA. Workbox is Google’s tool for making PWA more smoothly.</p>
<blockquote>
<p>“Workbox is a set of libraries and Node modules that make it easy to cache assets and take full advantage of features used to build <a href="https://developers.google.com/web/progressive-web-apps/">Progressive Web Apps</a>.”</p>
</blockquote>
<p>There is an excellent <a href="https://developers.google.com/web/tools/workbox/guides/get-started">“Getting Started” guide</a> which I followed and set up the initial version in a matter of minutes. Workbox is providing <a href="https://developers.google.com/web/tools/workbox/modules/workbox-strategies">predefined caching strategies</a>, like “CacheFirst” or “StaleWhileRevalidate”. You could set the caching strategy in a single line, like this:</p>
<pre class="language-js"><code class="language-js"><span class="token comment">// Serve all CSS files with StaleWhileRevalidate strategy</span><br>workbox<span class="token punctuation">.</span>routing<span class="token punctuation">.</span><span class="token function">registerRoute</span><span class="token punctuation">(</span><br>  <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span><br>  <span class="token keyword">new</span> <span class="token class-name">workbox<span class="token punctuation">.</span>strategies<span class="token punctuation">.</span>StaleWhileRevalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><span class="token punctuation">)</span></code></pre>
<p>This strategy tells of serving old/stale CSS files if available. If not available, use a network request to fetch files.</p>
<p>You could see all the strategies for Code Line Daily <a href="https://github.com/maliMirkec/code-line-daily/blob/master/src/sw/sw.js">in the GitHub repository</a>.</p>
<h2>Precaching</h2>
<p>After setting the strategies, I have created the list of files to precache using <a href="https://developers.google.com/web/tools/workbox/guides/precache-files/cli">Workbox CLI</a>. I have installed Workbox CLI as a global <code>npm</code> package.</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> i -g workbox-cli</code></pre>
<p>After that, <code>workbox</code> command was available in my terminal. I have run the command to bring up the wizard.</p>
<pre class="language-bash"><code class="language-bash">workbox wizard --injectManifest</code></pre>
<p>I have selected configured paths and selected files to precache, and Workbox CLI created a new file for me.</p>
<p>To be able to inject the files into the Service Worker file, I have added the following line to it:</p>
<pre class="language-js"><code class="language-js">workbox<span class="token punctuation">.</span>precaching<span class="token punctuation">.</span><span class="token function">precacheAndRoute</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Finally, I have run the command <code>workbox injectManifest</code> which created the new Service Worker file with a populated list of files to precache.</p>
<h2>Automation</h2>
<p>I was quite happy how everything was working, but I realised that I would need to run these commands manually. Since  I have already put much effort to automatize this project, I wanted to add Workbox to my Gulp tasks. Luckily for me, Workbox is available as a plugin for Node.js environment, too.</p>
<p>There is a <code>generateSW</code> mode that creates a service worker with a precaching setup which seemed like a logical option for my needs.</p>
<blockquote>
<p>“This will generate a service worker with precaching setup for all of the files picked up by your configuration.”</p>
</blockquote>
<p>Here is the configuration for my project.</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>  <span class="token property">"globDirectory"</span><span class="token operator">:</span> <span class="token string">"dist/"</span><span class="token punctuation">,</span><br>  <span class="token property">"globPatterns"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>    <span class="token string">"**/*.{html,webmanifest,css,eot,svg,ttf,woff,woff2,png,js,ico,jpg}"</span><br>  <span class="token punctuation">]</span><span class="token punctuation">,</span><br>  <span class="token property">"globIgnores"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>    <span class="token string">"docs/**/*"</span><span class="token punctuation">,</span><br>    <span class="token string">"gfx/cover/**/*"</span><br>  <span class="token punctuation">]</span><span class="token punctuation">,</span><br>  <span class="token property">"swDest"</span><span class="token operator">:</span> <span class="token string">"dist/sw.js"</span><span class="token punctuation">,</span><br>  <span class="token property">"swSrc"</span><span class="token operator">:</span> <span class="token string">"src/sw/sw.js"</span><br><span class="token punctuation">}</span></code></pre>
<p>where:</p>
<ul>
<li><code>swSrc</code> option tells where to find the Service Worker file,</li>
<li><code>swDest</code> option tells where to save the processed Service Worker file,</li>
<li><code>globDirectory</code> option tells which folder to scan for precached files,</li>
<li><code>globPatterns</code> option tells which patterns to use, and</li>
<li><code>globIgnores</code> option tells which folders to ignore, despite the pattern match.</li>
</ul>
<p>After running the Gulp tasks, I got the final Service Worker file which looks like this:</p>
<pre class="language-js"><code class="language-js"><span class="token comment">// load workbox</span><br><span class="token function">importScripts</span><span class="token punctuation">(</span><span class="token string">'https://storage.googleapis.com/workbox-cdn/releases/4.3.1/workbox-sw.js'</span><span class="token punctuation">)</span><br><br><span class="token comment">// output successful message</span><br><span class="token keyword">if</span> <span class="token punctuation">(</span>workbox<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Yay! Workbox is loaded 🎉</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><br><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Boo! Workbox didn't load 😬</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><br><span class="token punctuation">}</span><br><br>workbox<span class="token punctuation">.</span>core<span class="token punctuation">.</span><span class="token function">setCacheNameDetails</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  prefix<span class="token operator">:</span> <span class="token string">'cld'</span><span class="token punctuation">,</span><br>  suffix<span class="token operator">:</span> <span class="token string">'v1.0'</span><span class="token punctuation">,</span><br>  precache<span class="token operator">:</span> <span class="token string">'precache'</span><span class="token punctuation">,</span><br>  runtime<span class="token operator">:</span> <span class="token string">'runtime'</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><br><br>workbox<span class="token punctuation">.</span>precaching<span class="token punctuation">.</span><span class="token function">precacheAndRoute</span><span class="token punctuation">(</span><span class="token punctuation">[</span><br>  <span class="token comment">// precached file list</span><br><span class="token punctuation">]</span><span class="token punctuation">)</span><br><br><span class="token comment">// Serve all html files with StaleWhileRevalidate strategy</span><br>workbox<span class="token punctuation">.</span>routing<span class="token punctuation">.</span><span class="token function">registerRoute</span><span class="token punctuation">(</span><br>  <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.html$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span><br>  <span class="token keyword">new</span> <span class="token class-name">workbox<span class="token punctuation">.</span>strategies<span class="token punctuation">.</span>NetworkFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><span class="token punctuation">)</span><br><br><span class="token comment">// Serve all css files with StaleWhileRevalidate strategy</span><br>workbox<span class="token punctuation">.</span>routing<span class="token punctuation">.</span><span class="token function">registerRoute</span><span class="token punctuation">(</span><br>  <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span><br>  <span class="token keyword">new</span> <span class="token class-name">workbox<span class="token punctuation">.</span>strategies<span class="token punctuation">.</span>StaleWhileRevalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><span class="token punctuation">)</span><br><br><span class="token comment">// Serve all css files with StaleWhileRevalidate strategy</span><br>workbox<span class="token punctuation">.</span>routing<span class="token punctuation">.</span><span class="token function">registerRoute</span><span class="token punctuation">(</span><br>  <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span><br>  <span class="token keyword">new</span> <span class="token class-name">workbox<span class="token punctuation">.</span>strategies<span class="token punctuation">.</span>StaleWhileRevalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><span class="token punctuation">)</span><br><br><span class="token comment">// Serve all other assets with CacheFirst strategy</span><br>workbox<span class="token punctuation">.</span>routing<span class="token punctuation">.</span><span class="token function">registerRoute</span><span class="token punctuation">(</span><br>  <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(?:png|jpg|jpeg|svg|gif|webp|ico|webmanifest|eot,ttf,woff,woff2)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span><br>  <span class="token keyword">new</span> <span class="token class-name">workbox<span class="token punctuation">.</span>strategies<span class="token punctuation">.</span>CacheFirst</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>    plugins<span class="token operator">:</span> <span class="token punctuation">[</span><br>      <span class="token keyword">new</span> <span class="token class-name">workbox<span class="token punctuation">.</span>expiration<span class="token punctuation">.</span>Plugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>        maxEntries<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span><br>        maxAgeSeconds<span class="token operator">:</span> <span class="token number">30</span> <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span><br>      <span class="token punctuation">}</span><span class="token punctuation">)</span><br>    <span class="token punctuation">]</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><br><span class="token punctuation">)</span><br></code></pre>
<h2>Final results</h2>
<p>Code Line Daily is now Progressive Web App. That is my second PWA, and I would recommend everyone to learn more about it. The site is now available offline, but it is also saving bandwidth for my users by serving cached assets whenever possible. Go ahead and try to install <a href="https://cld.silvestar.codes/">Code Line Daily</a> and let me know what do you think.</p>
<p><img src="https://res.cloudinary.com/starbist/image/upload/w_720,q_100/v1574166140/pwa-after2_cbz06b.gif" alt="Lighthouse showing fireworks for perfect scores."></p>
<p>As a bonus point, I have run the audit for Code Line Daily site, and I see fireworks again, just like on my personal site. 💯</p>
</div>
  </div>
</div>

  <hr class="text-alpha hr">
  <section class="banner margin-top-alpha margin-bottom-alpha">
  <div class="wrapper margin-top margin-bottom text-center">
    <div class="padding">
      
      
      
      <h3 class="fz-step-2 no-margin-bottom">Share the article:</h3>
      <div class="margin-top margin-bottom-alpha">
        <a class="margin-left margin-right" href="https://twitter.com/intent/tweet?url=https://www.silvestar.codes/articles/how-i-built-my-second-progressive-web-app-pwa/&text=How I built my second Progressive Web App (PWA)&via=malimirkeccita" target="_blank">Twitter ⇢</a>
        <a class="margin-left margin-right" href="https://facebook.com/sharer.php?u=https://www.silvestar.codes/articles/how-i-built-my-second-progressive-web-app-pwa/" target="_blank">Facebook ⇢</a>
        <a class="margin-left margin-right" href="https://www.reddit.com/submit?url=https://www.silvestar.codes/articles/how-i-built-my-second-progressive-web-app-pwa/" target="_blank">Reddit ⇢</a>
      </div>
      <h3 class="fz-step-2 no-margin-top">About the Author</h3>
      <div class="copy">
        <p>Silvestar is a fearless web developer who is very enthusiastic about web technologies and everything related to frontend development.</p>
      </div>
      <div class="margin-top margin-bottom-alpha">
        <a class="margin-left margin-right" href="/about/">About ⇢</a>
        <a class="margin-left margin-right" href="/portfolio/">Portfolio ⇢</a>
        <a class="margin-left margin-right" href="/contact/">Contact ⇢</a>
      </div>
      
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
          
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
      
      
      <h3 class="fz-step-2 no-margin-top">Read more articles:</h3>
      <div class="margin-top margin-bottom">
        <a class="button button--small" href="/articles/2019-lookback/" title="2019 Lookback">⇠ Prev post</a>
        <a class="button button--small" href="/articles/how-i-built-my-first-progressive-web-app-pwa/">Next post ⇢</a>
      </div>
    </div>
  </div>
</section>



  <hr class="text-alpha hr">


        
        
          
            

  
  
  <section class="banner margin-top-alpha margin-bottom-alpha">
  <div class="wrapper margin-top margin-bottom text-center">
    <div class="padding">
      
      
        <h2 class="fz-step-4 no-margin-top margin-bottom">I am <em>available</em> for a new project.</h2>
      
      
        <div class="margin-top copy"><p>I specialized in <strong>HTML</strong>, <strong>CSS</strong>, <strong>JavaScript</strong>, <strong>WordPress</strong>, <strong>Shopify</strong>, and <strong>JAMstack</strong> technologies.</p>
</div>
      
      
        <div class="margin-top">
          <a class="button" href="/contact/">Hire me ⇢</a>
        </div>
      
    </div>
  </div>
</section>





          
        
      
    </main>
    
  <footer class="text-center">
    
      <nav>
        <ul class="list-style-none">
          
            <li class="margin-right margin-left">
              <a href="/portfolio/" class="padding-y-1">Portfolio</a>
            </li>
          
            <li class="margin-right margin-left">
              <a href="/articles/" class="padding-y-1">Blog</a>
            </li>
          
            <li class="margin-right margin-left">
              <a href="/about/" class="padding-y-1">About</a>
            </li>
          
            <li class="margin-right margin-left">
              <a href="/contact/" class="padding-y-1">Contact</a>
            </li>
          
            <li class="margin-right margin-left">
              <a href="/rss.xml" class="padding-y-1">Feed</a>
            </li>
          
        </ul>
      </nav>
    
    
      <nav>
        <ul class="list-style-none">
          
            <li class="margin-right margin-left">
              <a href="https://www.linkedin.com/in/starbist/" class="padding-y-1">LinkeIn</a>
            </li>
          
            <li class="margin-right margin-left">
              <a href="https://twitter.com/malimirkeccita" class="padding-y-1">Twitter</a>
            </li>
          
            <li class="margin-right margin-left">
              <a href="https://github.com/maliMirkec" class="padding-y-1">GitHub</a>
            </li>
          
            <li class="margin-right margin-left">
              <a href="https://codepen.io/CiTA/" class="padding-y-1">CodePen</a>
            </li>
          
        </ul>
      </nav>
    
    
      <p class="fz-step--1">&copy; Silvestar Bistrović, 2021</p>
    
    
      <p><a href="/"><img class="margin-auto" src="/gfx/svg/logo-2021.svg" alt="Silvestar Bistrović" width="50" height="50" loading="lazy"></a></p>
    
  </footer>


    <link rel="stylesheet" href="/css/style.min.css" media="print" onload='this.media="all"'>
<link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet" media='print' onload='this.media="all"'>

    <script src="/js/cldnry.js"></script>

  </body>
</html>




