<p><strong><a href="https://en.bem.info/">BEM</a></strong> is great. It is simple, yet powerful. If you're not familiar with it, I highly recommend reading <a href="https://csswizardry.com/2013/01/mindbemding-getting-your-head-round-bem-syntax/">this article</a> by Harry Roberts.</p>
<p>In short, it is a <code>CSS</code> naming convention methodology. It stands for: <em>block, element, modifier</em>. <em>Blocks</em> are parent components, <em>elements</em> are child components and <em>modifiers</em> are different states of components.</p>
<p><a href="https://wordpress.org/">WordPress</a> is great, too. It is an open source blog tool and a publishing platform and content management system.</p>
<p>This is a post about building custom WordPress theme with BEM naming methodology. <a href="https://github.com/maliMirkec/_bem">Check it out</a>!</p>
<h2>Starter template</h2>
<p>A few years ago, I was looking for a tool that could help me build WordPress themes more easily. I've stumbled upon <a href="http://underscores.me/">Underscores</a>, a starter theme for WordPress. I was amazed by the simplicity of it.</p>
<p>You enter a template name (and some other options, if you want) and you generate plain theme. It contains the following:</p>
<ul>
<li>simple templates,</li>
<li>default styling,</li>
<li>translations and</li>
<li>few custom functions.</li>
</ul>
<p>Swell! From this step, I could easily dive into developing beautiful custom themes.</p>
<h2>BEM</h2>
<p>Right about that time, I was learning about BEM. I was trying to implement it on the project I was working on. BEM really simplified my final <code>CSS</code>.</p>
<p>From the start, I saw great benefits of BEM:</p>
<ul>
<li>clean <code>HTML</code> templates and</li>
<li>clean <code>CSS</code> code.</li>
</ul>
<p>Not only that. If used with SASS or any other preprocessing tool, you could really organize your code. And debugging and fixing style was a piece of cake.</p>
<h2>Starter template with BEM methodology</h2>
<p>An idea was born—why don't I build a WordPress starter template with BEM methodology?</p>
<p>Great! I should fork Underscores starter template and start customizing it. Like everything else in life, it was easier said than done.</p>
<h3>Problems</h3>
<p>I knew it will be a daunting project to deal with. Going through all the templates and SASS files was hard enough, for sure. But adding classes and styling on some parts of WordPress was just impossible.</p>
<p>For example, comments. WordPress provides you with a commenting system out of the box. It is a great feature used by many people out there. But adding custom classes to comment components could not be done easily. As I found out later, it should be done by using callback of <a href="https://codex.wordpress.org/Function_Reference/wp_list_comments">wp_list_comments</a> function and writing custom callback function. Here is an example code:</p>
<blockquote>
<p>{codeblock lang:html %}</p>
</blockquote>
<div class="comment-list _comments__list">
<?php
  wp_list_comments( array(
    'style' => 'div',
    'short_ping' => true,
    'callback' => '**_bem_comments**',
  ) );
?>
</div><!-- .comment-list -->
> {endcodeblock %}
<p>If you're interested in a custom callback function <code>_bem_comments</code> you could see it <a href="https://github.com/maliMirkec/_bem/blob/master/inc/bem-comments.php">here</a>.</p>
<p>Another example of how difficult it is to add classes to post navigation links.</p>
<blockquote>
<p>{codeblock lang:php %}
/**</p>
</blockquote>
<ul>
<li>Custom _bem post links</li>
<li></li>
<li>@package _bem
*/
add_filter( 'next_post_link', '_bem_next_post_link' );
add_filter( 'previous_post_link', '_bem_previous_post_link' );</li>
</ul>
<blockquote>
<p>{endcodeblock %}</p>
</blockquote>
<blockquote>
<p>{codeblock lang:php %}
/**</p>
</blockquote>
<ul>
<li>Custom next post link</li>
<li></li>
<li>@param string $format Accepts format string.
*/
function _bem_next_post_link( $format ) {
return str_replace( 'href=', 'class=&quot;<strong>_post-navigation__link _post-navigation__link--next</strong>&quot; href=', $format );
}</li>
</ul>
<blockquote>
<p>{endcodeblock %}</p>
</blockquote>
<blockquote>
<p>{codeblock lang:php %}
/**</p>
</blockquote>
<ul>
<li>Custom previous post link</li>
<li></li>
<li>@param string $format Accepts format string.
*/
function _bem_previous_post_link( $format ) {
return str_replace( 'href=', 'class=&quot;<strong>_post-navigation__link _post-navigation__link--previous</strong>&quot; href=', $format );
}</li>
</ul>
<blockquote>
<p>{endcodeblock %}</p>
</blockquote>
<p>There are still some WordPress parts where I couldn't find the solution how to add classes to <code>HTML</code> components, like WordPress widgets. If you know how to do this, please let me know.</p>
<h2>Fancy stuff</h2>
<p>BEM is big deal, but there is more stuff that I've implemented in this starter template:</p>
<ul>
<li>cita-flex,</li>
<li>System fonts,</li>
<li>Gutenberg,</li>
<li>Sass MQ,</li>
<li>CSS locks and</li>
<li>Critical CSS</li>
</ul>
<h3>cita-flex</h3>
<p><a href="https://github.com/maliMirkec/cita-flex">cita-flex</a> is a flexbox grid system built by me. It is a set of <code>SASS</code> mixins and <code>CSS</code> classes that could help you build grid system. Although it is not perfect, it works in most cases, especially with simple templates, like ones that are used by this starter theme.</p>
<h3>System fonts</h3>
<p>Using <a href="https://css-tricks.com/snippets/css/system-font-stack/">system fonts</a> are awesome and beautiful. And they don't cost a dime—they are part of an operating system on your device. There is no extra request. Yaay!</p>
<h3>Gutenberg</h3>
<p>Web typography is hard. That's why I'm using <a href="http://matejlatin.github.io/Gutenberg/">Gutenberg</a> by Matej Latin, a meaningful web typography starter kit. It comes with a bunch of great stuff, such as modular scale and vertical rhythm. Now typography is not so hard. Double yaay!</p>
<h3>Sass MQ</h3>
<p>Writing media queries could be a tedious and boring task. And it could lead to many inconsistencies in a code. To avoid all that, I'm using <a href="http://sass-mq.github.io/sass-mq/">Sass MQ</a>, a <code>Sass</code> mixin with configuration for media queries. Usage is pretty simple, but if you want to make it even simpler, create a snippet for your favorite text editor. This is how it looks in Atom:</p>
<blockquote>
<p>{codeblock %}
'.source.scss':
'mq.scss':
'prefix': 'mq'
'body': '@include mq(${1:$from}: ${2:desktop}) {\n\t$3\n}'
{endcodeblock %}</p>
</blockquote>
<h3>CSS locks</h3>
<p>When I first read about <a href="https://css-tricks.com/css-locks/">CSS locks</a>, I wasn't sure what is going on here. But after <a href="https://blog.typekit.com/2016/08/17/flexible-typography-with-css-locks/">reading</a> and <a href="https://fvsch.com/code/css-locks/">reading</a> some more, I realized how powerful this technique is. After playing around for a while with it, I decided that it could be a great addition to this project. Check it out, resize the browser (this website is built using _bem starter theme, too) and see it in action.</p>
<h3>Critical CSS</h3>
<p>This is a tough one. And frankly, it needs more work.</p>
<p><a href="https://www.smashingmagazine.com/2015/08/understanding-critical-css/">Critical CSS</a> as a technique is valid and it comes with great intentions. But man, to make it work out of the box was a real pain in the ass, pardon my french. For months I was trying to make it work using different tools. Finally, I end up using <a href="https://mscharl.github.io/gulp-critical-css/">gulp-critical-css</a>, a <code>Gulp</code> task that extracts critical <code>CSS</code> into a separate stylesheet. But that also didn't work at first, so I <a href="https://github.com/maliMirkec/gulp-critical-css">forked the project</a>, made some tweaks and it's working now.</p>
<h2>Final thoughts</h2>
<p>There you have it, a WordPress starter theme. All you need to do is download <a href="https://github.com/maliMirkec/_bem">the project</a> and start developing new shiny WordPress theme.</p>
<p>As always, any comments or <a href="https://twitter.com/malimirkeccita">tweets</a> are appreciated.</p>
