



  

  


<!DOCTYPE html>
<html lang="en">
  <head>
    <head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link rel="canonical" href="/articles/how-i-built-my-first-progressive-web-app-pwa/">


  

  

  <meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="apple-mobile-web-app-title" content="Silvestar Bistroviƒá">
<meta name="application-name" content="Silvestar Bistroviƒá">
<link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png?v=starbist">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png?v=starbist">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png?v=starbist">
<link rel="manifest" href="/favicon/site.webmanifest?v=starbist">
<link rel="mask-icon" href="/favicon/safari-pinned-tab.svg?v=starbist" color="#12e09f">
<link rel="shortcut icon" href="/favicon/favicon.ico?v=starbist">
<meta name="apple-mobile-web-app-title" content="SB site - Silvestar Bistroviƒá website">
<meta name="application-name" content="SB site - Silvestar Bistroviƒá website">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/favicon/mstile-144x144.png?v=starbist">
<meta name="msapplication-config" content="/favicon/browserconfig.xml?v=starbist">
<meta name="theme-color" content="#12e09f">

  

  
  <link rel="alternate" type="application/rss+xml" title="RSS Feed for silvestar.codes" href="/rss2.xml">
</head>

  </head>
  <body>
    
  <header>
    <nav>
      <ul class="list-style-none">
        
          <li>
            <a class="db margin-right" href="/">
              <img src="/gfx/svg/logo-2021.svg" alt="Silvestar Bistroviƒá" width="90" height="90">
            </a>
          </li>
        
        
          
            <li>
              <ul>
                <li class="fz-step-1">
                  <a href="/portfolio/">Portfolio</a>
                </li>
                
                  
                    <li>
                      <a href="/side-projects/">Side Projects</a>
                    </li>
                  
                    <li>
                      <a href="/testimonials/">Testimonials</a>
                    </li>
                  
                
              </ul>
            </li>
          
            <li>
              <ul>
                <li class="fz-step-1">
                  <a href="/articles/">Blog</a>
                </li>
                
                  
                    <li>
                      <a href="/publications/">Publications</a>
                    </li>
                  
                    <li>
                      <a href="https://mentor.silvestar.codes/reads#newsletter">UI Dev Newsletter</a>
                    </li>
                  
                
              </ul>
            </li>
          
            <li>
              <ul>
                <li class="fz-step-1">
                  <a href="/links/">Links</a>
                </li>
                
                  
                    <li>
                      <a href="/mentoring/">Mentoring</a>
                    </li>
                  
                    <li>
                      <a href="/uses/">Uses</a>
                    </li>
                  
                
              </ul>
            </li>
          
            <li>
              <ul>
                <li class="fz-step-1">
                  <a href="/about/">About</a>
                </li>
                
                  
                    <li>
                      <a href="/contact/">Contact</a>
                    </li>
                  
                    <li>
                      <a href="/services/">Services</a>
                    </li>
                  
                
              </ul>
            </li>
          
        
      </ul>
    </nav>
  </header>


    <main id="main">
      
        
        
          

  <section class="hero margin-top-alpha">
  <div class="wrapper text-center">
    <div class="padding">
      <div class="margin-bottom">
        <a class="button button--small button--inverse" href="/articles/">/Blog</a>
        
          
            <span class="button button--small button--inverse">pwa</span>
          
        
        
          <span class="button button--small button--inverse">2019-11-19</span>
        
      </div>
      
        <h1 class="fz-step-5 no-margin-top margin-bottom">How I built my first Progressive Web App (PWA)</h1>
      
      
      
    </div>
  </div>
</section>

  <hr class="text-alpha hr">

<div class="wrapper margin-top-alpha margin-bottom-alpha">
  <div class="padding">
    <div class="copy copy--body"><p>As of today, my site is available as a Progressive Web App. Yaay! üíØ</p>
<p><img src="https://res.cloudinary.com/starbist/image/upload/w_720,q_100/v1574166140/pwa-after2_cbz06b.gif" alt="Lighthouse showing fireworks for perfect scores."></p>
<p>In this post, you would learn more about how and why I added this exciting feature to my site.</p>
<h2>Why did I do it</h2>
<p>I like to think of myself as a very pedantic person, and I was trying to make my site better from the very first day. At the time when I was building my site, I didn‚Äôt understand all metrics from web performance tools like PageSpeed Insights or WebPageTest. But, as I was trying to make my site better, I was learning new techniques, and my website got better and better.</p>
<p>Now my site gets top scores, but one thing was bothering me for some time. It was the Progressive Web App score.</p>
<img class="cld-responsive" data-src="https://res.cloudinary.com/starbist/image/upload/w_auto,f_auto,q_auto:eco,dpr_auto,c_scale/pwa-before_cokho9" alt="Lighthouse score for Progressive Web App before optimisation." sizes="800px" loading="lazy">
<p>By looking at the PWA report, I realised my site is ready for PWA. There were only a few issues to resolve. I didn‚Äôt understand these issues, but that never stopped me before.</p>
<h2>How I did it</h2>
<p>As my starting point, I decided to follow the <a href="https://codelabs.developers.google.com/codelabs/your-first-pwapp/#4">‚ÄúYour First Progressive Web App‚Äù tutorial</a>. The very first step was to update my <code>webmanifest.json</code> file. I have added <code>start_url</code> and <code>display</code> options and some required meta tags, like <code>&lt;meta name=&quot;apple-mobile-web-app-capable&quot; content=&quot;yes&quot;&gt;</code>.</p>
<pre><code class="language-json">{
  &quot;name&quot;: &quot;SB site - Silvestar Bistroviƒá website&quot;,
  &quot;short_name&quot;: &quot;SB site - Silvestar Bistroviƒá website&quot;,
  &quot;icons&quot;: [
    ‚Ä¶
  ],
  &quot;theme_color&quot;: &quot;#12e09f&quot;,
  &quot;background_color&quot;: &quot;#fff&quot;,
  &quot;start_url&quot;: &quot;/offline.html&quot;,
  &quot;display&quot;: &quot;standalone&quot;
}
</code></pre>
<p>Next, I created <code>sw.js</code> file for Service Worker. To register service worker, there is a small snippet that needs to be added to your index page:</p>
<pre><code class="language-js">// CODELAB: Register service worker.
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () =&gt; {
    navigator.serviceWorker.register('/service-worker.js')
      .then((reg) =&gt; {
        console.log('Service worker registered.', reg);
      });
  });
}
</code></pre>
<p>The content of the Service Worker file could vary, depending what you want to use achieve with your site. Since my site is quite straightforward, I decided to make use of basic offline experience only. That means I needed an <code>offline.html</code> file for offline experience. It would be a stripped version of my homepage. So I removed external images, and created a placeholder using CSS. I removed external CSS file and inlined it in <code>head</code> section. The only thing left to do was to add favicon files. I am not yet sure if this is need, but I decided to put it there, just in case. Those files aren‚Äôt big anyway.</p>
<p>The <code>sw.js</code> file could be broken into four segments:</p>
<ul>
<li>defining constants,</li>
<li>installation,</li>
<li>activation, and</li>
<li>fetching.</li>
</ul>
<p>First, I defined the cache name and which files to cache.</p>
<pre><code class="language-js">// constants
const CACHE_NAME = 'sb-cache-v1.3'
const FILES_TO_CACHE = [
  '/offline.html',
  '/favicon/apple-touch-icon.png',
  '/favicon/favicon-32x32.png',
  '/favicon/favicon-16x16.png',
  '/favicon/site.webmanifest',
  '/favicon/safari-pinned-tab.svg',
  '/favicon/favicon.ico',
  '/favicon/mstile-144x144.png',
  '/favicon/browserconfig.xml'
]
</code></pre>
<p>Next, I created the <code>install</code> event which opens cache with given cache name and caches the files.</p>
<pre><code class="language-js">self.addEventListener('install', (event) =&gt; {
  // CODELAB: Precache static resources here.
  event.waitUntil(
    caches.open(CACHE_NAME).then((cache) =&gt; {
      console.log('[ServiceWorker] Pre-caching offline page')
      return cache.addAll(FILES_TO_CACHE)
    })
  )
})
</code></pre>
<p>After that, I created the <code>activate</code> event, which cleans cached files from disk.</p>
<pre><code class="language-js">self.addEventListener('activate', (event) =&gt; {
  // CODELAB: Remove previous cached data from disk.
  event.waitUntil(
    caches.keys().then(keyList =&gt; Promise.all(keyList.map((key) =&gt; {
      if (key !== CACHE_NAME) {
        console.log('[ServiceWorker] Removing old cache', key)
        return caches.delete(key)
      }
    })))
  )
})
</code></pre>
<p>Finally, I created the <code>fetch</code> event, which handles page navigations only when request <code>.mode</code> is <code>navigate</code>. If the request fails to fetch the item from the network, it tries to fetch the <code>offline.html</code> file.</p>
<pre><code class="language-js">self.addEventListener('fetch', (event) =&gt; {
  // CODELAB: Add fetch event handler here.
  if (event.request.mode === 'navigate') {
    event.respondWith(
      fetch(event.request)
        .catch(() =&gt; caches.open(CACHE_NAME)
          .then(cache =&gt; cache.match('offline.html')))
    )
  }
})
</code></pre>
<h2>Final Results</h2>
<p>After the deployment, I run the audit for the site and now I have it looks like this:</p>
<img class="cld-responsive" data-src="https://res.cloudinary.com/starbist/image/upload/w_auto,f_auto,q_auto:eco,dpr_auto,c_scale/pwa-after_au0ip8" alt="Lighthouse score for Progressive Web App after optimisation." sizes="800px" loading="lazy">
<p>I think fireworks deserve another appearance. üíØ</p>
<p><img src="https://res.cloudinary.com/starbist/image/upload/w_720,q_100/v1574166140/pwa-after2_cbz06b.gif" alt="Lighthouse showing fireworks for perfect scores."></p>
<h2>Next steps</h2>
<p>The next steps are to learn more about <a href="https://developers.google.com/web/tools/workbox/">Workbox</a>. And after that, I plan to add full offline experience for my side project <a href="https://cld.silvestar.codes/">Code Line Daily</a>.</p>
<p>Edit: Continue reading <a href="/articles/how-i-built-my-second-progressive-web-app-pwa/">my second article about ‚ÄúHow I built my second Progressive Web App (PWA)‚Äù</a>.</p>
</div>
  </div>
</div>

  <hr class="text-alpha hr">
  <section class="banner margin-top-alpha margin-bottom-alpha">
  <div class="wrapper margin-top margin-bottom text-center">
    <div class="padding">
      <h3 class="fz-step-3 no-margin-top no-margin-bottom">About</h3>
      <p>Silvestar is a fearless web developer who is very enthusiastic about web technologies and everything related to frontend development.</p>
      <div class="margin-top margin-bottom">
        <a class="button button--small" href="/about/">About ‚á¢</a>
        <a class="button button--small" href="/portfolio/">Portfolio ‚á¢</a>
        <a class="button button--small" href="/contact/">Contact ‚á¢</a>
      </div>
      <hr class="text-dark hr">
      
      
      
      <h3 class="fz-step-2 no-margin-top no-margin-bottom">Share:</h3>
      <div class="margin-top margin-bottom">
        <a class="button button--small" href="https://twitter.com/intent/tweet?url=https://www.silvestar.codes/articles/how-i-built-my-first-progressive-web-app-pwa/&text=How I built my first Progressive Web App (PWA)&via=malimirkeccita" target="_blank" rel="nofollow noopener">Twitter ‚á¢</a>
        <a class="button button--small" href="https://facebook.com/sharer.php?u=https://www.silvestar.codes/articles/how-i-built-my-first-progressive-web-app-pwa/" target="_blank" rel="nofollow noopener">Facebook ‚á¢</a>
        <a class="button button--small" href="https://www.reddit.com/submit?url=https://www.silvestar.codes/articles/how-i-built-my-first-progressive-web-app-pwa/" target="_blank" rel="nofollow noopener">Reddit ‚á¢</a>
      </div>
      <hr class="text-dark hr">
      
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
          
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
      
      
      <h3 class="fz-step-1 no-margin-top no-margin-bottom">Read more articles:</h3>
      <div class="margin-top margin-bottom">
        <a class="button button--small" href="" title="How I built my second Progressive Web App (PWA)">‚á† Prev post</a>
        <a class="button button--small" href=""}">Next post ‚á¢</a>
      </div>
    </div>
  </div>
</section>




        
        
      
    </main>
    
  <footer class="text-center">
    
      <nav>
        <ul class="list-style-none">
          
            <li class="margin-right margin-left">
              <a href="/portfolio/" class="padding-y-1">Portfolio</a>
            </li>
          
            <li class="margin-right margin-left">
              <a href="/articles/" class="padding-y-1">Blog</a>
            </li>
          
            <li class="margin-right margin-left">
              <a href="/about/" class="padding-y-1">About</a>
            </li>
          
            <li class="margin-right margin-left">
              <a href="/contact/" class="padding-y-1">Contact</a>
            </li>
          
            <li class="margin-right margin-left">
              <a href="/rss.xml" class="padding-y-1">Feed</a>
            </li>
          
        </ul>
      </nav>
    
    
      <nav>
        <ul class="list-style-none">
          
            <li class="margin-right margin-left">
              <a href="https://www.linkedin.com/in/starbist/" class="padding-y-1">LinkeIn</a>
            </li>
          
            <li class="margin-right margin-left">
              <a href="https://twitter.com/malimirkeccita" class="padding-y-1">Twitter</a>
            </li>
          
            <li class="margin-right margin-left">
              <a href="https://github.com/maliMirkec" class="padding-y-1">GitHub</a>
            </li>
          
            <li class="margin-right margin-left">
              <a href="https://codepen.io/CiTA/" class="padding-y-1">CodePen</a>
            </li>
          
        </ul>
      </nav>
    
    
      <p class="fz-step--1">&copy; Silvestar Bistroviƒá, 2021</p>
    
    
      <p><a href="/"><img class="margin-auto" src="/gfx/svg/logo-2021.svg" alt="Silvestar Bistroviƒá" width="50" height="50" loading="lazy"></a></p>
    
  </footer>


    <link rel="stylesheet" href="/css/style.min.css" media="print" onload="this.media='all'">

    <script src="/js/cldnry.min.js" async></script>
<script src="/js/index.min.js" async></script>

  </body>
</html>




